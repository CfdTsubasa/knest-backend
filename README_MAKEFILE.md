# ğŸš€ KnestApp Makefile Guide

KnestAppãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹ç™ºã‚’åŠ¹ç‡åŒ–ã™ã‚‹ãŸã‚ã®Makefileã‚³ãƒãƒ³ãƒ‰é›†ã§ã™ã€‚

## ğŸ“‹ æ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯3ã¤ã®MakefileãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š

- **Root Makefile** (`/Makefile`) - ãƒ¡ã‚¤ãƒ³é–‹ç™ºç’°å¢ƒï¼ˆä»®æƒ³ç’°å¢ƒãƒ™ãƒ¼ã‚¹ï¼‰
- **Backend Makefile** (`/knest_backend/Makefile`) - Django ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è©³ç´°ç®¡ç†
- **iOS Makefile** (`/KnestApp/Makefile`) - iOS ã‚¢ãƒ—ãƒªç®¡ç†

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### æ–°è¦é–‹ç™ºè€…ã®å ´åˆ

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd knest-app

# åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆä»®æƒ³ç’°å¢ƒä½œæˆ + ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰
make setup

# ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
make createsuperuser

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
make dev
```

### æ—¢å­˜é–‹ç™ºè€…ã®å ´åˆ

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
make dev

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ç¢ºèª
make status
```

## ğŸŒŸ ãƒ¡ã‚¤ãƒ³ã‚³ãƒãƒ³ãƒ‰ï¼ˆRoot Makefileï¼‰

### åŸºæœ¬æ“ä½œ

```bash
# ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
make help

# åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆä»®æƒ³ç’°å¢ƒä½œæˆ + ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰
make setup

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
make dev

# ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
make createsuperuser

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
make test

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ç¢ºèª
make status
```

### ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

```bash
# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
make install

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
make migrate

# ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆä»®æƒ³ç’°å¢ƒã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ï¼‰
make clean
```

### è©³ç´°ã‚³ãƒãƒ³ãƒ‰

```bash
# Backendç”¨è©³ç´°ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§
make backend-help

# iOSç”¨è©³ç´°ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§  
make ios-help
```

## ğŸ–¥ï¸ Backend è©³ç´°ã‚³ãƒãƒ³ãƒ‰

**å‰ææ¡ä»¶**: ãƒ«ãƒ¼ãƒˆã§ `make setup` ã‚’å®Ÿè¡Œæ¸ˆã¿

```bash
cd knest_backend

# ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
make help

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
make migrate
make makemigrations

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ
make reset-db

# Django shell
make shell

# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆBackendãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ï¼‰
make server

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
make test

# ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆflake8ãŒå¿…è¦ï¼‰
make lint

# ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆblackãŒå¿…è¦ï¼‰
make format

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
make backup

# ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ
make create-test-data
```

## ğŸ“± iOS ã‚³ãƒãƒ³ãƒ‰

```bash
cd KnestApp

# ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
make help

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ“ãƒ«ãƒ‰
make build

# ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§å®Ÿè¡Œ
make run

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
make test

# ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼èµ·å‹•
make simulator

# åˆ©ç”¨å¯èƒ½ãªãƒ‡ãƒã‚¤ã‚¹ä¸€è¦§
make devices

# Xcodeã§é–‹ã
make open

# ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
make clean
```

## ğŸ”§ å…¸å‹çš„ãªé–‹ç™ºãƒ•ãƒ­ãƒ¼

### 1. æœã®é–‹ç™ºé–‹å§‹

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd knest-app

# çŠ¶æ…‹ç¢ºèª
make status

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
make dev
```

### 2. é–‹ç™ºä¸­

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®è©³ç´°æ“ä½œãŒå¿…è¦ãªå ´åˆ
cd knest_backend
make help
# ä¾‹ï¼šmake shell, make reset-db ãªã©

# iOSã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰
cd ../KnestApp
make build

# ãƒ¡ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ãƒ†ã‚¹ãƒˆ
cd ..
make test
```

### 3. çµ‚äº†æ™‚

```bash
# ã‚µãƒ¼ãƒãƒ¼ã¯ Ctrl+C ã§åœæ­¢

# å¿…è¦ã«å¿œã˜ã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cd knest_backend
make backup
```

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ³•

#### 1. ä»®æƒ³ç’°å¢ƒã®å•é¡Œ

```bash
# ä»®æƒ³ç’°å¢ƒã‚’å‰Šé™¤ã—ã¦å†ä½œæˆ
make clean
make setup
```

#### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å•é¡Œ

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ
cd knest_backend
make reset-db
```

#### 3. ä¾å­˜é–¢ä¿‚ã®å•é¡Œ

```bash
# ä¾å­˜é–¢ä¿‚å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
make install
```

#### 4. çŠ¶æ…‹ãŒã‚ã‹ã‚‰ãªã„

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ç¢ºèª
make status
```

## ğŸ¯ ä½¿ç”¨å ´é¢åˆ¥ã‚¬ã‚¤ãƒ‰

### æ–°æ©Ÿèƒ½é–‹ç™ºæ™‚

```bash
# 1. æœ€æ–°çŠ¶æ…‹ã«æ›´æ–°
make install

# 2. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ
cd knest_backend
make create-test-data

# 3. é–‹ç™ºé–‹å§‹
cd ..
make dev
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£ä½œæ¥­

```bash
cd knest_backend

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
make makemigrations

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
make migrate

# Django shell ã§ãƒ‡ãƒ¼ã‚¿ç¢ºèª
make shell

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
make backup
```

### ãƒ‡ãƒãƒƒã‚°æ™‚

```bash
# Backendè©³ç´°ãƒ­ã‚°ç¢ºèª
cd knest_backend
make logs

# Django shell ã§ãƒ‡ãƒãƒƒã‚°
make shell

# iOS ãƒ‡ãƒã‚¤ã‚¹ãƒ­ã‚°ç¢ºèª
cd ../KnestApp
make logs
```

## ğŸ“š å‚è€ƒæƒ…å ±

### æ¥ç¶šæƒ…å ±

- **Backend Server**: http://localhost:8000
- **Admin Panel**: http://localhost:8000/admin/
- **API Documentation**: http://localhost:8000/swagger/

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
knest-app/
â”œâ”€â”€ Makefile                    # Root Makefileï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
â”œâ”€â”€ venv/                      # ä»®æƒ³ç’°å¢ƒ
â”œâ”€â”€ db.sqlite3                 # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”œâ”€â”€ requirements.txt           # ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ manage.py                  # Djangoç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ knest_backend/
â”‚   â”œâ”€â”€ Makefile              # Backendè©³ç´°Makefile
â”‚   â””â”€â”€ ...
â””â”€â”€ KnestApp/
    â”œâ”€â”€ Makefile              # iOS Makefile
    â”œâ”€â”€ KnestApp.xcodeproj
    â””â”€â”€ ...
```

### ç’°å¢ƒè¦ä»¶

- Python 3.8+
- Django 4.2+
- Xcode 15+ï¼ˆiOSé–‹ç™ºæ™‚ï¼‰
- iOS 17.0+ï¼ˆiOSé–‹ç™ºæ™‚ï¼‰

## ğŸ‰ ã¾ã¨ã‚

### ãƒ¡ã‚¤ãƒ³é–‹ç™ºã®æµã‚Œ

1. **`make setup`** - åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
2. **`make dev`** - æ—¥å¸¸ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
3. **`make status`** - çŠ¶æ…‹ç¢ºèª
4. **`make backend-help`** / **`make ios-help`** - è©³ç´°æ“ä½œ

### åˆ©ç‚¹

- âœ… **æ—¢å­˜ã®ä»•çµ„ã¿ã‚’ç¶­æŒ** - venvãƒ™ãƒ¼ã‚¹ã®ç’°å¢ƒã¯ãã®ã¾ã¾
- âœ… **æ®µéšçš„ãªæ©Ÿèƒ½æ‹¡å¼µ** - å¿…è¦ã«å¿œã˜ã¦è©³ç´°æ“ä½œå¯èƒ½
- âœ… **ã‚·ãƒ³ãƒ—ãƒ«ãªæ—¥å¸¸æ“ä½œ** - `make dev` ã§é–‹ç™ºé–‹å§‹
- âœ… **çŠ¶æ…‹ç¢ºèªæ©Ÿèƒ½** - `make status` ã§ä¸€ç›®ç­ç„¶

ä½•ã‹å•é¡ŒãŒã‚ã‚Œã° `make help` ã§ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼ 